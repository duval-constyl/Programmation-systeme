#SCRIPT DE CREATION DE LA BASE DE DONNEES
#GROUPE 9


#MEMBRES DU GROUPE
# 1- ALLAHNDIGUIM YANNICK
# 2- KAANA ALBERT
# 3- SOWENG DAVIS
# 4- FOTSO FOALENG DUVAL


# TABLE : STOCK

DROP TABLE IF EXISTS STOCK;
CREATE TABLE STOCK(
        Id_Stock     INTEGER IDENTITY(1, 1) PRIMARY KEY,
        Date_Stock     DATE,
        Durée_Stock     INT,
)

# TABLE : INGREDIENTS

DROP TABLE IF EXISTS INGREDIENTS;
CREATE TABLE INGREDIENTS(
        Id_Ingrédient     INTEGER IDENTITY(1, 1) PRIMARY KEY,
        Nom_Ingrédient     VARCHAR(25),
        Etat_Ingrédient     VARCHAR(25),
        Id_Stock_STOCK     INTEGER IDENTITY(1, 1),
        PRIMARY KEY (Id_Ingrédient)
)


#TABLE : EQUIPEMENT CUISINE

DROP TABLE IF EXISTS EQUIPEMENT_CUISINE;
CREATE TABLE EQUIPEMENT_CUISINE(
        Id_Equipement     INTEGER IDENTITY(1, 1) PRIMARY KEY,
        Eqmt_Cuisine     VARCHAR(64),
        Qté_Equipement     INT,
        PRIMARY KEY (Id_Equipement)
)


#TABLE : RESERVATION

DROP TABLE IF EXISTS RESERVATION
CREATE TABLE RESERVATION(
        Id_Reservation    INTEGER IDENTITY(1, 1) PRIMARY KEY,
        Nombre_Client     INT,
        Menu_Choisir     VARCHAR(250),
	Date_Reservation  Date,
        PRIMARY KEY (Id_Reservation)
)


#TABLE : EXISTS DENREES

DROP TABLE IF EXISTS DENREES;
CREATE TABLE DENREES(
        Id_denrée    INTEGER IDENTITY(1, 1) PRIMARY KEY,
        Type_Denrée     VARCHAR(250),
        Qté_denrée     INT,
        Date_denrée     DATE,
        Prix_denrée     FLOAT(25),
        Id_Stock_STOCK     INTEGER IDENTITY(1, 1),
        PRIMARY KEY (Id_denrée)
)


#TABLE :RECETTES

DROP TABLE IF EXISTS RECETTES;
CREATE TABLE RECETTES(
        Id_Recette     INTEGER IDENTITY(1, 1) PRIMARY KEY,
        Nom_Recette     VARCHAR(64),
        Type_Recette     VARCHAR(64),
        Temp_Preparation     DATETIME,
        Prix     FLOAT(25),
        PRIMARY KEY (Id_Recette)
)

#TABLE : MATERIELS RESTAURATION

DROP TABLE IF EXISTS MATERIELS_RESTAURATION;
CREATE TABLE MATERIELS_RESTAURATION(
        Id_Materiel_Restauration     INTEGER IDENTITY(1, 1) PRIMARY KEY,
        Nom_Materiel_Restauration     VARCHAR(250),
        Type_Materiel_Restauration     VARCHAR(250),
        Qté_Materiel_Restauration     INT,
        PRIMARY KEY (Id_Materiel_Restauration)
)

# TABLE: MATERIELS RESTAURATION

DROP TABLE IF EXISTS Faire;
CREATE TABLE Faire(
        Id_Equipement_EQUIPEMENT CUISINE     INTEGER IDENTITY(1, 1),
        Id_Recette_RECETTES     INTEGER IDENTITY(1, 1),
        PRIMARY KEY (Id_Equipement_EQUIPEMENT CUISINE,Id_Recette_RECETTES)
)

#TABLE: Comprendre


DROP TABLE IF EXISTS Comprendre;
CREATE TABLE Comprendre(
        Id_Recette_RECETTES     INTEGER IDENTITY(1, 1),
        Id_Ingrédient_INGREDIENTS     INTEGER IDENTITY(1, 1),
        PRIMARY KEY (Id_Recette_RECETTES,Id_Ingrédient_INGREDIENTS)
)


#TABLE: utiliser


DROP TABLE IF EXISTS utiliser;
CREATE TABLE utiliser(
        Id_denrée_DENREES     INTEGER IDENTITY(1, 1),
        Id_Recette_RECETTES     INTEGER IDENTITY(1, 1),
        PRIMARY KEY (Id_denrée_DENREES,Id_Recette_RECETTES)
)



ALTER TABLE INGREDIENTS ADD CONSTRAINT FK_INGREDIENTS_Id_Stock_STOCK FOREIGN KEY (Id_Stock_STOCK) REFERENCES STOCK(Id_Stock)
ALTER TABLE DENREES ADD CONSTRAINT FK_DENREES_Id_Stock_STOCK FOREIGN KEY (Id_Stock_STOCK) REFERENCES STOCK(Id_Stock)
ALTER TABLE Faire ADD CONSTRAINT FK_Faire_Id_Equipement_EQUIPEMENT CUISINE FOREIGN KEY (Id_Equipement_EQUIPEMENT CUISINE) REFERENCES EQUIPEMENT CUISINE(Id_Equipement)
ALTER TABLE Faire ADD CONSTRAINT FK_Faire_Id_Recette_RECETTES FOREIGN KEY (Id_Recette_RECETTES) REFERENCES RECETTES(Id_Recette)
ALTER TABLE Comprendre ADD CONSTRAINT FK_Comprendre_Id_Recette_RECETTES FOREIGN KEY (Id_Recette_RECETTES) REFERENCES RECETTES(Id_Recette)
ALTER TABLE Comprendre ADD CONSTRAINT FK_Comprendre_Id_Ingrédient_INGREDIENTS FOREIGN KEY (Id_Ingrédient_INGREDIENTS) REFERENCES INGREDIENTS(Id_Ingrédient)
ALTER TABLE utiliser ADD CONSTRAINT FK_utiliser_Id_denrée_DENREES FOREIGN KEY (Id_denrée_DENREES) REFERENCES DENREES(Id_denrée)
ALTER TABLE utiliser ADD CONSTRAINT FK_utiliser_Id_Recette_RECETTES FOREIGN KEY (Id_Recette_RECETTES) REFERENCES RECETTES(Id_Recette)
